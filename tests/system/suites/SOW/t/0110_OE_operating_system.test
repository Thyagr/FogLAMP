#!/bin/bash

# Reads configuration setting
source ${SUITE_BASEDIR}/suite.cfg

# Downloads FogLAMP snap if it is not already available
if [[ ! -f ${TMP_DIRECTORY}/${FOGLAMP_SNAP} ]]; then

    echo Downloadin FogLAMP snap.        >> ${RESULT_DIR}/$TEST_NAME.temp  2>&1

    cd   ${TMP_DIRECTORY}
    ${CMD_WGET} ${FOGLAMP_SNAP_PATH}     >> ${RESULT_DIR}/$TEST_NAME.temp  2>&1

    echo FogLAMP snap dowloaded.         >> ${RESULT_DIR}/$TEST_NAME.temp  2>&1
fi

# Installs FogLAMP snap
sudo snap install --devmode ${TMP_DIRECTORY}/${FOGLAMP_SNAP} >> ${RESULT_DIR}/$TEST_NAME.temp 2>&1

# Checks if FogLAMP snap is installed
snap list ${FOGLAMP_NAME} | grep -c ${FOGLAMP_NAME}
